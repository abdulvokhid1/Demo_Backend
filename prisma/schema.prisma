// This is your Prisma schema file,
// learn more about it in the docs https//pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// modify Database Scheme
model User {
  id             Int     @id @default(autoincrement())
  member_id      String? @unique
  email          String  @unique
  hashedPassword String
  name           String? // can be null(optional)

  mobilephone_number String  @default("01000000000")
  phone_number       String?
  zip1               String?
  zip2               String?
  address            String?
  address1           String?
  addressdoro        String?
  zonecode           String?
  recomid            String?
  sponid             String?
  return_bank        String?
  return_account     String?
  return_name        String?

  createdAt DateTime     @default(now())
  updatedAt DateTime     @updatedAt
  // relationship
  notes     Note[]
  role      String
  centerId  Int          @default(0)
  center    Center       @relation(fields: [centerId], references: [id])
  levelId   Int          @default(0)
  Level     CompanyLevel @relation(fields: [levelId], references: [id])

  @@map("users") // users id "table's name" in Postgres SQL
}

// One user can "write" Many notes
model Note {
  id          Int      @id @default(autoincrement())
  title       String
  description String
  url         String
  // other fields ...
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  // relationship
  userId      Int // like "foreign key"
  user        User     @relation(fields: [userId], references: [id])

  @@map("notes")
}

model Center {
  id          Int      @id @default(autoincrement())
  name        String
  description String?
  url         String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  User        User[]

  @@map("centers")
}

model CompanyLevel {
  id          Int      @id @default(autoincrement())
  title       String
  description String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @default(now()) @updatedAt
  User        User[]

  @@map("company_levels")
}
